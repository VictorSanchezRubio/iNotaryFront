<!--
<table style="width: 98%;">
    <tr style="width: 100%;">
        <td style="width: 100%;">
-->
<div class="example-large-box mat-elevation-z4" style="margin-top: 25px;">

    <div class="contaniner" style="margin-left: 20px;">

        <form class="wpx-form">

            <div class="columnaR" style="display: flex;">

                <mat-form-field appearance="fill">
                    <mat-label>Área</mat-label>
                    <mat-select required [(ngModel)]="_tipo" [ngModelOptions]="{standalone: true}"
                        (ngModelChange)="updateReport()">
                        <mat-option>--</mat-option>
                        <mat-option *ngFor="let auxSelect of tipos" [value]="auxSelect.value">
                            {{auxSelect.viewValue}}
                        </mat-option>

                    </mat-select>
                </mat-form-field>
            </div>

            <div class="columnaR" style="display: flex;">
                <mat-form-field appearance="fill" *ngIf="_tipo=='ES'">
                    <mat-label>Tipo</mat-label>
                    <mat-select required [(ngModel)]="_escritura" [ngModelOptions]="{standalone: true}"
                        (ngModelChange)="updateReport()">
                        <mat-option>--</mat-option>
                        <mat-option *ngFor="let auxSelect of escrituras" [value]="auxSelect.value">
                            {{auxSelect.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>



            <div class="columna5" style="display: flex;">
                <mat-form-field appearance="fill" *ngIf="_tipo=='ES'">
                    <mat-label>Tipo Escritura</mat-label>
                    <mat-select required [(ngModel)]="_areaEscritura" [ngModelOptions]="{standalone: true} " 
                        (ngModelChange)="updateReport()">
                        <mat-option>--</mat-option>
                        <mat-option *ngFor="let auxSelect of areaEscrituras" [value]="auxSelect.value">
                            {{auxSelect.viewValue}}
                        </mat-option>
                        
                    </mat-select>
                </mat-form-field>
            </div>

            
            <div class="columna5" style="display: flex;  padding-left: 2em;">
                <mat-form-field appearance="fill" *ngIf="_tipo=='ES' && _areaEscritura=='CL'">
                    <mat-label>Tipo de Cliente</mat-label>
                    <mat-select required [(ngModel)]="_tipocliente" [ngModelOptions]="{standalone: true}"
                        (ngModelChange)="updateReport()">
                        <mat-option>--</mat-option>
                        <mat-option *ngFor="let auxSelect of tiposcliente"
                            [value]="auxSelect.value">
                            {{auxSelect.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

<!--
            <div class="columnaR" style="display: flex;">
                <mat-form-field appearance="fill" *ngIf="_tipo=='ES'">
                    <mat-label>Tipo Escritura</mat-label>
                    <mat-select required [(ngModel)]="_areaEscritura" [ngModelOptions]="{standalone: true} " 
                        (ngModelChange)="updateReport()">
                        <mat-option>--</mat-option>

                        <mat-optgroup *ngFor="let areaEscriturasGroup as areaEscrituras"> {{areaEscriturasGroup.name}}
                           
                        <mat-option *ngFor="let auxSelect of areaEscrituras" [value]="auxSelect.value">
                            {{auxSelect.viewValue}}
                        </mat-option>
                        
                    </mat-optgroup>
                    </mat-select>
                </mat-form-field>
            </div>
-->

            <div class="columna5" style="display: flex;  padding-left: 2em;">
                <mat-form-field appearance="fill" *ngIf="_areaEscritura=='CO' && _tipo=='ES'">
                    <mat-label>Concepto</mat-label>
                    <mat-select required [(ngModel)]="_concepto" [ngModelOptions]="{standalone: true}"
                        (ngModelChange)="updateReport()">
                        <mat-option>--</mat-option>
                        <mat-option *ngFor="let auxSelect of conceptos | myFilteronceptos:_escritura"
                            [value]="auxSelect.value">
                            {{auxSelect.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>



            <div class="columna5" style="display: flex; padding-left: 2em;">
                <mat-form-field appearance="fill">
                    <mat-label>Top Ten</mat-label>
                    <mat-select required [(ngModel)]="_topTen" [ngModelOptions]="{standalone: true}"
                        (ngModelChange)="updateReport()">
                        <mat-option>--</mat-option>
                        <mat-option *ngFor="let auxSelect of topTen"
                            [value]="auxSelect.value"> <!-- [disabled]="_areaEscritura==='AS' && _topTen==='0'" -->
                            {{auxSelect.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>





            <div class="columna5" style="display: flex;  padding-left: 2em;">
                <mat-form-field appearance="fill" *ngIf="_tipo=='ES' && (_areaEscritura=='AS' || _areaEscritura=='EM' || _areaEscritura=='CL')">
                    <mat-label>Escrituras / €</mat-label>
                    <mat-select required [(ngModel)]="_escfac" [ngModelOptions]="{standalone: true}"
                        (ngModelChange)="updateReport()">
                        <mat-option>--</mat-option>
                        <mat-option *ngFor="let auxSelect of escfacs"
                            [value]="auxSelect.value">
                            {{auxSelect.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>


            <div class="columna5" style="display:flex; padding-left: 2em;">
                <mat-checkbox [(ngModel)]="_grafica" [ngModelOptions]="{standalone: true}"
                (ngModelChange)="updateReport()">
                    <mat-label>Ver Gráfico</mat-label>
                </mat-checkbox>
            </div>


            <div class="columna5" style="display:flex; padding-left: 2em;">
                <mat-checkbox [(ngModel)]="_vDatos" [ngModelOptions]="{standalone: true}"
                (ngModelChange)="updateReport()">
                    <mat-label>Ver Datos</mat-label>
                </mat-checkbox>

            </div>



            <div class="columna5" style="display: flex; padding-left: 2em;">
                <a style="cursor: pointer" (click)="createPdf()">
                    <mat-icon>picture_as_pdf</mat-icon>
                  </a>
            </div>

            <div class="columna5" style="display: flex;  padding-left: 2em;">
                <a style="cursor: pointer" (click)="exportexcel()">
                    <mat-icon> cloud_download</mat-icon>
                  </a>
            </div>



            <div class="columnaR" style="display:flex; clear: both;">
                <mat-form-field appearance="fill">
                    <mat-label>Periodo</mat-label>
                    <mat-select required [(ngModel)]="_periodo" [ngModelOptions]="{standalone: true}"
                        (ngModelChange)="updateReport()">
                        <mat-option>--</mat-option>
                        <mat-option *ngFor="let auxSelect of periodo" [value]="auxSelect.value">
                            {{auxSelect.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>


            <div class="columnaR" style="display:flex;" *ngIf="_periodo=='MEN'">
                <mat-form-field appearance="fill">
                    <mat-label>Mes</mat-label>
                    <mat-select required [(ngModel)]="_mes" [ngModelOptions]="{standalone: true}"
                        (ngModelChange)="updateReport()">
                        <mat-option>--</mat-option>
                        <mat-option *ngFor="let auxSelect of meses" [value]="auxSelect.value">
                            {{auxSelect.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <div class="columnaR" style="display:flex;" *ngIf="_periodo=='TRI'">
                <mat-form-field appearance="fill">
                    <mat-label>Trimestre</mat-label>
                    <mat-select required [(ngModel)]="_trimestre" [ngModelOptions]="{standalone: true}"
                        (ngModelChange)="updateReport()">
                        <mat-option>--</mat-option>
                        <mat-option *ngFor="let auxSelect of trimestres" [value]="auxSelect.value">
                            {{auxSelect.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <div class="columnaR" style="display:flex;" *ngIf="_periodo=='SEM'">
                <mat-form-field appearance="fill">
                    <mat-label>Semestres</mat-label>
                    <mat-select required [(ngModel)]="_semestre" [ngModelOptions]="{standalone: true}"
                        (ngModelChange)="updateReport()">
                        <mat-option>--</mat-option>
                        <mat-option *ngFor="let auxSelect of semestres" [value]="auxSelect.value">
                            {{auxSelect.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>


            <div class="columnaR" style="display:flex;" *ngIf="_periodo=='EFE'">
                <mat-form-field>
                    <mat-label>Desde</mat-label>
                    <input matInput [matDatepicker]="picker" [min]="minDate" [max]="maxDate"
                        [(ngModel)]="_fechaDesde" [ngModelOptions]="{standalone: true}">
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker color="primary"></mat-datepicker>
                </mat-form-field>
            </div>


            <div class="columnaR" style="display:flex;" *ngIf="_periodo=='EFE'">
                <mat-form-field>
                    <mat-label>Hasta</mat-label>
                    <input matInput [matDatepicker]="picker" [min]="minDate" [max]="maxDate"
                        [(ngModel)]="_fechaHasta" [ngModelOptions]="{standalone: true}">
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker color="primary"></mat-datepicker>
                </mat-form-field>
            </div>








            <div class="columnaR" style="display:flex;" *ngIf="_periodo!='EFE'">
                <mat-form-field appearance="fill">
                    <mat-label>Anualidad</mat-label>
                    <mat-select required [(ngModel)]="_anualidad" [ngModelOptions]="{standalone: true}"
                        (ngModelChange)="updateReport()">
                        <mat-option>--</mat-option>
                        <mat-option *ngFor="let auxSelect of anualidades" [value]="auxSelect.value">
                            {{auxSelect.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <div class="columnaR" style="display:flex;">
                <mat-form-field appearance="fill">
                    <mat-label>Típo Gráfico</mat-label>
                    <mat-select required [(ngModel)]="_chart" [ngModelOptions]="{standalone: true}"
                        (ngModelChange)="updateReport()">
                        <mat-option>--</mat-option>
                        <mat-option *ngFor="let auxSelect of charts" [value]="auxSelect.value">
                            {{auxSelect.viewValue}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <div class="columna5" style="display:flex; padding-left: 3em;">
                <mat-checkbox [(ngModel)]="_chartApiladas" [ngModelOptions]="{standalone: true}"
                    (ngModelChange)="updateReport()" *ngIf="_chart=='BR'">
                    <mat-label>Apiladas</mat-label>
                </mat-checkbox>
            </div>

            <div class="columna5" style="display:flex; padding-left: 3em;">
                <mat-checkbox [(ngModel)]="_chartDoughnut" [ngModelOptions]="{standalone: true}"
                    (ngModelChange)="updateReport()" *ngIf="_chart=='DO'">
                    <mat-label>Semi / Full circle</mat-label>
                </mat-checkbox>
            </div>

            <div class="columna5" style="display:flex; padding-left: 3em;">
                <mat-checkbox [(ngModel)]="_byAnualidad" [ngModelOptions]="{standalone: true}"
                    (ngModelChange)="updateReport()">
                    <mat-label>Valores por Anualidad</mat-label>
                </mat-checkbox>
            </div>



        </form>

    </div>

</div>

<!--          
        </td>

    </tr>

</table>
-->


<div style="display: block; width: 100%; height: 90%; overflow: auto;" *ngIf="_grafica">
    <div style="display: block; width: 100%; height: 90%; overflow: auto;" *ngIf="barChartData">
        <canvas baseChart [datasets]="barChartData" [labels]="barChartLabels" [options]="barChartOptions"
            [colors]="barChartColors" [legend]="barChartLegend" [chartType]="barChartType" id="chartArea">
        </canvas>
    </div>
</div>


<div class="example-large-box mat-elevation-z4" style="margin-top: 25px; overflow: auto; width: 80%;"  *ngIf="_vDatos">

    <div class="contaniner" style="margin-left: 20px;">


        <table mat-table [dataSource]="dataTable" class="mat-elevation-z8" id="myTable" matSort #sort="matSort">
            <ng-container *ngFor="let column of displayedColumnsTable" [matColumnDef]="column">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{column}}</th> <!-- -->
                <td mat-cell *matCellDef="let element"> {{element[column] | myNumericValues:_tipo:_escritura:_areaEscritura:_escfac }} </td> <!-- | MyNumericValuesPipe:_ti}} -->
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="columnsToDisplayTable"></tr>
            <tr mat-row *matRowDef="let row; columns: columnsToDisplayTable;"></tr>
        </table>

    </div>

</div>